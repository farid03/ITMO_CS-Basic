 ORG 0x000
RES: WORD 0x0
T1: WORD 0x0
T1MUL: WORD 0x0
T1RES: WORD 0x0
T2: WORD 0x0
T2MUL: WORD 0x0
T2RES: WORD 0x0
T3: WORD 0x0
T3MUL: WORD 0x0
T3RES: WORD 0x0
A1: WORD 0xFF
B1: WORD 0xFF
A2: WORD 0x12
B2: WORD 0x91
A3: WORD 0x4
B3: WORD 0x3
ISNEGRES: WORD 0x0
  
START: CLA
 PUSH
 LD A1
 SXTB
 PUSH
 LD B1
 SXTB
 PUSH
 CALL MUL
 ST T1RES
 POP
 POP
 POP

 CLA
 ST ISNEGRES
 PUSH
 LD A2
 SXTB
 PUSH
 LD B2
 SXTB
 PUSH
 CALL MUL
 ST T2RES
 POP
 POP
 POP

 CLA
 ST ISNEGRES
 PUSH
 LD A3
 SXTB
 PUSH
 LD B3
 SXTB
 PUSH
 CALL MUL
 ST T3RES
 POP
 POP
 POP

 LD A1
 WORD 0x900B
 ST T1MUL

 CMP T1RES
 BEQ T1TRUE
 CLA
 ST T1
 JUMP NEXTTEST2
T1TRUE: CLA
 INC
 ST T1

NEXTTEST2: POP
 LD A2
 WORD 0x900D
 ST T2MUL

 CMP T2RES
 BEQ T2TRUE
 CLA
 ST T2
 JUMP NEXTTEST3
T2TRUE: CLA
 INC
 ST T2

NEXTTEST3: POP
 LD A3
 WORD 0x900F
 ST T3MUL

 CMP T3RES
 BEQ T3TRUE
 CLA
 ST T3
 JUMP EOP
T3TRUE: CLA
 INC
 ST T3

EOP: POP
 LD T1
 AND T2
 AND T3
 ST RES
 HLT

MUL: LD 07FD
 CALL ISNEG
 LD 07FE
 CALL ISNEG

 LD 07FD
 CALL ABS
 INC
 ST 07FD
 LD 07FE
 CALL ABS
 ST 07FE

M: LOOP 07FD
 JUMP WHILE

ENDLN: LD ISNEGRES
 BEQ EXIT
 LD 07FF
 NEG
 ST 07FF
EXIT: LD 07FF
 RET

WHILE: LD 07FF
 ADD 07FE
 ST 07FF
 JUMP M 

ISNEG: BMI ISTR
 RET
ISTR: LD ISNEGRES
 BEQ FLAGTRUE
 CLA
 ST ISNEGRES
 RET
FLAGTRUE: INC
 ST ISNEGRES
 RET
 
ABS: BMI ABS1
 RET
ABS1: NEG
 RET
END